@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: #0a0a0a;
  --foreground: #ededed;
}

body {
  color: var(--foreground);
  background: var(--background);
}

/* LCARS-inspired styling */
@layer components {
  .lcars-panel {
    @apply bg-gray-900 border-l-4 border-lcars-amber rounded-lcars p-4;
  }

  .lcars-button {
    @apply px-6 py-2 bg-lcars-amber text-gray-950 font-semibold rounded-lcars-pill
           hover:brightness-110 transition-all duration-200;
  }

  .lcars-button-secondary {
    @apply px-6 py-2 bg-lcars-lavender text-gray-950 font-semibold rounded-lcars-pill
           hover:brightness-110 transition-all duration-200;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .font-display {
    font-family: var(--font-orbitron), sans-serif;
  }

  .font-body {
    font-family: var(--font-exo2), sans-serif;
  }
}

/* =============================================================================
 * WCAG 2.1 TOUCH TARGET UTILITIES
 * Ensures interactive elements meet 44x44px minimum touch target size
 * ============================================================================= */

.touch-target {
  min-width: 44px;
  min-height: 44px;
}

/* For small visual elements that need larger hit areas */
.touch-target-wrapper {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 44px;
  min-height: 44px;
}

/* Animation keyframes */
@keyframes fade-out {
  0% {
    opacity: 1;
    transform: translateY(0);
  }
  100% {
    opacity: 0;
    transform: translateY(-10px);
  }
}

@keyframes lcars-pulse {
  0%,
  100% {
    box-shadow: 0 0 4px rgba(255, 153, 0, 0.3);
    border-color: rgba(255, 153, 0, 0.6);
  }
  50% {
    box-shadow: 0 0 16px rgba(255, 153, 0, 0.7);
    border-color: rgba(255, 153, 0, 1);
  }
}

@keyframes lcars-pulse-alert {
  0%,
  100% {
    box-shadow: 0 0 4px rgba(255, 153, 153, 0.3);
    border-color: rgba(255, 153, 153, 0.6);
  }
  50% {
    box-shadow: 0 0 16px rgba(255, 153, 153, 0.8);
    border-color: rgba(255, 153, 153, 1);
  }
}

@keyframes lcars-pulse-success {
  0%,
  100% {
    box-shadow: 0 0 4px rgba(153, 255, 204, 0.3);
  }
  50% {
    box-shadow: 0 0 12px rgba(153, 255, 204, 0.6);
  }
}

/* Animation utility classes */
.animate-fade-out {
  animation: fade-out 2s ease-out forwards;
}

.lcars-pulse {
  animation: lcars-pulse 2s ease-in-out infinite;
}

.lcars-pulse-alert {
  animation: lcars-pulse-alert 1.5s ease-in-out infinite;
}

.lcars-pulse-success {
  animation: lcars-pulse-success 2s ease-in-out infinite;
}

/* Glow effect for active elements */
.lcars-glow {
  box-shadow: 0 0 8px rgba(255, 153, 0, 0.5);
}

/* =============================================================================
 * TUTORIAL HIGHLIGHT ANIMATION
 * Used by TutorialOverlay to highlight UI elements during onboarding
 * ============================================================================= */

@keyframes pulse-highlight {
  0%, 100% {
    box-shadow: 0 0 0 4px rgba(217, 152, 86, 0.6), 0 0 20px rgba(217, 152, 86, 0.3);
  }
  50% {
    box-shadow: 0 0 0 6px rgba(217, 152, 86, 0.8), 0 0 30px rgba(217, 152, 86, 0.5);
  }
}

.tutorial-highlight {
  position: relative;
  z-index: 45;
  box-shadow: 0 0 0 4px rgba(217, 152, 86, 0.6), 0 0 20px rgba(217, 152, 86, 0.3);
  animation: pulse-highlight 2s infinite;
  border-radius: 4px;
}

/* Starmap star twinkling animation */
@keyframes twinkle {
  0%,
  100% {
    opacity: 0.2;
  }
  50% {
    opacity: 0.9;
  }
}

/* SVG pulse animation for empire nodes */
@keyframes svg-pulse {
  0%,
  100% {
    opacity: 0.15;
    r: var(--pulse-radius);
  }
  50% {
    opacity: 0.35;
    r: calc(var(--pulse-radius) + 8px);
  }
}

@keyframes svg-pulse-alliance {
  0%,
  100% {
    stroke-opacity: 0.3;
    stroke-dashoffset: 0;
  }
  50% {
    stroke-opacity: 0.6;
  }
  100% {
    stroke-dashoffset: 16;
  }
}

/* Starmap utility classes */
.star-twinkle {
  animation: twinkle var(--twinkle-duration, 3s) ease-in-out infinite;
  animation-delay: var(--twinkle-delay, 0s);
}

.empire-pulse {
  animation: svg-pulse 2s ease-in-out infinite;
}

.alliance-line {
  animation: svg-pulse-alliance 3s linear infinite;
}

/* Nebula particle animation */
@keyframes nebula-drift {
  0%,
  100% {
    transform: translate(0, 0) scale(1);
    opacity: 0.6;
  }
  25% {
    transform: translate(2px, -1px) scale(1.05);
    opacity: 0.7;
  }
  50% {
    transform: translate(-1px, 2px) scale(0.95);
    opacity: 0.5;
  }
  75% {
    transform: translate(1px, 1px) scale(1.02);
    opacity: 0.65;
  }
}

.nebula-particle {
  animation: nebula-drift 4s ease-in-out infinite;
  animation-delay: var(--particle-delay, 0s);
}

/* Slow pulse animation for landing page */
@keyframes pulse-slow {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.85;
  }
}

.animate-pulse-slow {
  animation: pulse-slow 3s ease-in-out infinite;
}

/* =============================================================================
 * COMBAT NARRATIVE ANIMATIONS
 * ============================================================================= */

/* Critical hit flash - amber glow pulse */
@keyframes critical-flash {
  0%,
  100% {
    box-shadow: 0 0 0 rgba(255, 191, 0, 0);
    background-color: transparent;
  }
  25% {
    box-shadow: 0 0 20px rgba(255, 191, 0, 0.8), inset 0 0 10px rgba(255, 191, 0, 0.3);
    background-color: rgba(255, 191, 0, 0.1);
  }
  50% {
    box-shadow: 0 0 30px rgba(255, 191, 0, 1), inset 0 0 15px rgba(255, 191, 0, 0.4);
    background-color: rgba(255, 191, 0, 0.15);
  }
  75% {
    box-shadow: 0 0 20px rgba(255, 191, 0, 0.6), inset 0 0 8px rgba(255, 191, 0, 0.2);
    background-color: rgba(255, 191, 0, 0.08);
  }
}

.critical-hit {
  animation: critical-flash 0.5s ease-out 3;
}

/* Fumble effect - red flash */
@keyframes fumble-flash {
  0%,
  100% {
    box-shadow: 0 0 0 rgba(239, 68, 68, 0);
  }
  50% {
    box-shadow: 0 0 15px rgba(239, 68, 68, 0.7);
  }
}

.fumble-hit {
  animation: fumble-flash 0.4s ease-out 2;
}

/* Volley winner highlight - pulsing border */
@keyframes volley-winner {
  0%,
  100% {
    box-shadow: 0 0 5px currentColor;
    transform: scale(1);
  }
  50% {
    box-shadow: 0 0 20px currentColor, 0 0 30px currentColor;
    transform: scale(1.02);
  }
}

.volley-winner {
  animation: volley-winner 0.8s ease-in-out 2;
}

/* Victory banner entrance - bounce and glow */
@keyframes victory-entrance {
  0% {
    opacity: 0;
    transform: scale(0.5) translateY(-20px);
  }
  50% {
    opacity: 1;
    transform: scale(1.1) translateY(0);
  }
  70% {
    transform: scale(0.95);
  }
  100% {
    transform: scale(1);
  }
}

.victory-entrance {
  animation: victory-entrance 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Defeat banner - shake effect */
@keyframes defeat-shake {
  0%,
  100% {
    transform: translateX(0);
  }
  10%,
  30%,
  50%,
  70%,
  90% {
    transform: translateX(-5px);
  }
  20%,
  40%,
  60%,
  80% {
    transform: translateX(5px);
  }
}

.defeat-shake {
  animation: defeat-shake 0.5s ease-in-out;
}

/* Combat damage flash - red overlay */
@keyframes damage-flash {
  0% {
    background-color: rgba(239, 68, 68, 0.3);
  }
  100% {
    background-color: transparent;
  }
}

.damage-flash {
  animation: damage-flash 0.3s ease-out;
}

/* Sector capture celebration - green pulse */
@keyframes sector-capture {
  0% {
    box-shadow: 0 0 0 rgba(34, 197, 94, 0);
    transform: scale(1);
  }
  50% {
    box-shadow: 0 0 30px rgba(34, 197, 94, 0.6);
    transform: scale(1.05);
  }
  100% {
    box-shadow: 0 0 10px rgba(34, 197, 94, 0.3);
    transform: scale(1);
  }
}

.sector-capture {
  animation: sector-capture 0.8s ease-out;
}

/* Dice roll animation - spin effect */
@keyframes dice-roll {
  0% {
    transform: rotate(0deg) scale(1);
  }
  25% {
    transform: rotate(90deg) scale(1.2);
  }
  50% {
    transform: rotate(180deg) scale(1);
  }
  75% {
    transform: rotate(270deg) scale(0.9);
  }
  100% {
    transform: rotate(360deg) scale(1);
  }
}

.dice-roll {
  animation: dice-roll 0.4s ease-in-out;
}

/* Combat card slide in */
@keyframes slide-in-right {
  0% {
    opacity: 0;
    transform: translateX(30px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slide-in-left {
  0% {
    opacity: 0;
    transform: translateX(-30px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

.slide-in-right {
  animation: slide-in-right 0.3s ease-out;
}

.slide-in-left {
  animation: slide-in-left 0.3s ease-out;
}

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .animate-fade-out,
  .lcars-pulse,
  .lcars-pulse-alert,
  .lcars-pulse-success,
  .star-twinkle,
  .empire-pulse,
  .alliance-line,
  .nebula-particle,
  .animate-pulse-slow,
  .tutorial-highlight,
  .critical-hit,
  .fumble-hit,
  .volley-winner,
  .victory-entrance,
  .defeat-shake,
  .damage-flash,
  .sector-capture,
  .dice-roll,
  .slide-in-right,
  .slide-in-left {
    animation: none;
  }
}
